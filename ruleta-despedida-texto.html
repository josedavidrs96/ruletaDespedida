<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Despedida de Soltero - Migue (Versión Texto)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      padding: 20px;
    }

    .container {
      text-align: center;
      max-width: 600px;
      width: 100%;
    }

    .title {
      font-size: clamp(2rem, 5vw, 3rem);
      margin-bottom: 10px;
      font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .subtitle {
      font-size: clamp(1rem, 3vw, 1.2rem);
      margin-bottom: 30px;
      opacity: 0.9;
    }

    .roulette-container {
      position: relative;
      width: clamp(280px, 60vw, 400px);
      height: clamp(280px, 60vw, 400px);
      margin: 0 auto 30px;
    }

    .roulette {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      position: relative;
      transition: transform 10s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      border: 4px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      overflow: hidden;
    }

    .pointer {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-top: 25px solid #FFD700;
      z-index: 10;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .segment {
      position: absolute;
      width: 50%;
      height: 50%;
      transform-origin: 100% 100%;
      border: 2px solid rgba(255, 255, 255, 0.3);
      clip-path: polygon(0 0, 100% 0, 100% 100%);
    }

    .segment::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent);
      pointer-events: none;
    }

    .segment-text {
      position: absolute;
      top: 25%;
      left: 60%;
      width: 30%;
      text-align: center;
      line-height: 1.1;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8), -1px -1px 2px rgba(255,255,255,0.3);
      font-size: clamp(8px, 2vw, 12px);
      padding: 4px 2px;
      word-wrap: break-word;
      hyphens: auto;
      font-weight: 700;
      letter-spacing: 0.3px;
      background: rgba(0,0,0,0.3);
      border-radius: 6px;
      backdrop-filter: blur(2px);
      transform-origin: 50% 50%;
    }

    /* Segmentos con colores */
    .s1 { background: linear-gradient(45deg, #FF6B6B, #FF8E8E); transform: rotate(0deg); }
    .s2 { background: linear-gradient(45deg, #4ECDC4, #6EDDD6); transform: rotate(45deg); }
    .s3 { background: linear-gradient(45deg, #45B7D1, #6BC5D8); transform: rotate(90deg); }
    .s4 { background: linear-gradient(45deg, #96CEB4, #A8D5C0); transform: rotate(135deg); }
    .s5 { background: linear-gradient(45deg, #FFEAA7, #FFF3D1); transform: rotate(180deg); }
    .s6 { background: linear-gradient(45deg, #DDA0DD, #E6B3E6); transform: rotate(225deg); }
    .s7 { background: linear-gradient(45deg, #98D8C8, #A8E0D0); transform: rotate(270deg); }
    .s8 { background: linear-gradient(45deg, #F7DC6F, #F9E79F); transform: rotate(315deg); }

    /* Rotaciones de texto para orientación radial individual hacia el centro */
    .s1 .segment-text { transform: rotate(0deg); }
    .s2 .segment-text { transform: rotate(-45deg); }
    .s3 .segment-text { transform: rotate(-90deg); }
    .s4 .segment-text { transform: rotate(-135deg); }
    .s5 .segment-text { transform: rotate(-180deg); }
    .s6 .segment-text { transform: rotate(-225deg); }
    .s7 .segment-text { transform: rotate(-270deg); }
    .s8 .segment-text { transform: rotate(-315deg); }

    .spin-button {
      background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
      color: white;
      border: none;
      padding: clamp(12px, 3vw, 18px) clamp(25px, 6vw, 35px);
      font-size: clamp(14px, 3.5vw, 18px);
      border-radius: 25px;
      cursor: pointer;
      margin: 20px 0;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      font-family: 'Poppins', Arial, sans-serif;
    }

    .spin-button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 7px 20px rgba(0, 0, 0, 0.3);
    }

    .spin-button:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .result {
      margin-top: 30px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      font-size: clamp(16px, 4vw, 18px);
      min-height: 50px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .result h3 {
      margin: 0 0 10px 0;
      color: #FFEAA7;
      font-size: clamp(18px, 4.5vw, 20px);
    }

    .result p {
      margin: 0;
      font-weight: 500;
    }

    .spinning {
      animation: spin-glow 10s ease-out;
    }

    @keyframes spin-glow {
      0% { box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); }
      50% { box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5); }
      100% { box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); }
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .segment-text {
        font-size: 7px;
      }
    }

    @media (max-width: 480px) {
      .segment-text {
        font-size: 6px;
      }
    }

    @media (max-width: 360px) {
      .segment-text {
        font-size: 5px;
      }
    }

    @media (max-width: 320px) {
      .segment-text {
        font-size: 4px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="title">🎉 Despedida de Migue 🎉</h1>
    <p class="subtitle">Gira la ruleta y descubre el desafío para Migue</p>

    <div class="roulette-container">
      <div class="pointer"></div>
      <div class="roulette" id="roulette">
        <div class="segment s1" data-task="Cantar una canción de amor">
          <div class="segment-text">🎤 Cantar</div>
        </div>
        <div class="segment s2" data-task="Bailar salsa por 2 minutos">
          <div class="segment-text">💃 Bailar</div>
        </div>
        <div class="segment s3" data-task="Contar el chiste más malo">
          <div class="segment-text">😂 Chiste</div>
        </div>
        <div class="segment s4" data-task="Hacer 15 flexiones">
          <div class="segment-text">💪 Flexiones</div>
        </div>
        <div class="segment s5" data-task="Imitar un animal por 1 minuto">
          <div class="segment-text">🐶 Animal</div>
        </div>
        <div class="segment s6" data-task="Decir 3 cumplidos a cada amigo">
          <div class="segment-text">❤️ Cumplidos</div>
        </div>
        <div class="segment s7" data-task="Hacer una declaración de amor épica">
          <div class="segment-text">💕 Amor</div>
        </div>
        <div class="segment s8" data-task="Shot de tequila">
          <div class="segment-text">🥃 Shot</div>
        </div>
      </div>
    </div>

    <button class="spin-button" onclick="spinWithSound()" id="spinBtn">¡GIRAR RULETA!</button>

    <div class="result" id="result">
      <p>Haz clic para girar la ruleta</p>
    </div>
  </div>

  <script>
    let isSpinning = false;
    let currentRotation = 0;

    function createSpinAudio() {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const frequencies = [120, 180, 240, 300, 360, 420, 480, 540];

      frequencies.forEach((freq, i) => {
        const osc = audioContext.createOscillator();
        const gain = audioContext.createGain();
        osc.connect(gain).connect(audioContext.destination);
        osc.type = i % 2 === 0 ? 'sawtooth' : 'square';
        osc.frequency.setValueAtTime(freq, audioContext.currentTime);
        osc.frequency.exponentialRampToValueAtTime(freq * 0.1, audioContext.currentTime + 10);
        gain.gain.setValueAtTime(0.06, audioContext.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 10);
        osc.start(audioContext.currentTime);
        osc.stop(audioContext.currentTime + 10);
      });

      // Ruido blanco dinámico para fricción
      const noiseBuffer = audioContext.createBuffer(1, audioContext.sampleRate * 10, audioContext.sampleRate);
      const noiseData = noiseBuffer.getChannelData(0);
      for (let i = 0; i < noiseData.length; i++) {
        noiseData[i] = Math.random() * 2 - 1;
      }
      const noiseSource = audioContext.createBufferSource();
      const noiseGain = audioContext.createGain();
      noiseSource.buffer = noiseBuffer;
      noiseSource.connect(noiseGain);
      noiseGain.connect(audioContext.destination);
      noiseGain.gain.setValueAtTime(0.04, audioContext.currentTime);
      noiseGain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 10);
      noiseSource.start(audioContext.currentTime);
      noiseSource.stop(audioContext.currentTime + 10);

      // Múltiples clics dinámicos
      for (let i = 0; i < 5; i++) {
        const clickOscillator = audioContext.createOscillator();
        const clickGain = audioContext.createGain();
        clickOscillator.connect(clickGain);
        clickGain.connect(audioContext.destination);
        clickOscillator.type = 'triangle';
        clickOscillator.frequency.setValueAtTime(1500 + (i * 200), audioContext.currentTime);
        clickOscillator.frequency.exponentialRampToValueAtTime(300 + (i * 100), audioContext.currentTime + 10);
        clickGain.gain.setValueAtTime(0.03, audioContext.currentTime);
        clickGain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 10);
        clickOscillator.start(audioContext.currentTime + (i * 0.5));
        clickOscillator.stop(audioContext.currentTime + 10);
      }

      // Efecto whoosh
      const whooshOscillator = audioContext.createOscillator();
      const whooshGain = audioContext.createGain();
      whooshOscillator.connect(whooshGain);
      whooshGain.connect(audioContext.destination);
      whooshOscillator.type = 'sine';
      whooshOscillator.frequency.setValueAtTime(800, audioContext.currentTime);
      whooshOscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 10);
      whooshGain.gain.setValueAtTime(0.02, audioContext.currentTime);
      whooshGain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 10);
      whooshOscillator.start(audioContext.currentTime);
      whooshOscillator.stop(audioContext.currentTime + 10);
    }

    function spin() {
      if (isSpinning) return;

      isSpinning = true;
      const roulette = document.getElementById('roulette');
      const result = document.getElementById('result');
      const spinBtn = document.getElementById('spinBtn');

      result.innerHTML = '<p>Girando...</p>';
      spinBtn.disabled = true;
      roulette.classList.add('spinning');

      createSpinAudio();

      const spins = Math.random() * 4 + 8;
      const finalRotation = spins * 360;
      currentRotation += finalRotation;

      roulette.style.transition = 'transform 10s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
      roulette.style.transform = 'rotate(' + currentRotation + 'deg)';

      setTimeout(() => {
        showResult();
        isSpinning = false;
        spinBtn.disabled = false;
        roulette.classList.remove('spinning');
      }, 10000);
    }

    function showResult() {
      const tasks = [
        'Cantar una canción de amor',
        'Bailar salsa por 2 minutos',
        'Contar el chiste más malo',
        'Hacer 15 flexiones',
        'Imitar un animal por 1 minuto',
        'Decir 3 cumplidos a cada amigo',
        'Hacer una declaración de amor épica',
        'Shot de tequila'
      ];
      const normalizedRotation = (360 - (currentRotation % 360)) % 360;
      const segmentIndex = Math.floor(normalizedRotation / 45) % 8;
      document.getElementById('result').innerHTML =
        '<h3>🎯 Desafío para Migue:</h3><p>' + tasks[segmentIndex] + '</p>';
    }

    function spinWithSound() {
      spin();
    }
  </script>
</body>
</html> 