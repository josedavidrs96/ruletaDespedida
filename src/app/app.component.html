<div class="container">
    <h1 class="title">{{ title }}</h1>

    <!-- Ruleta Optimizada -->
    <div class="roulette-container">
        <div class="roulette-wrapper">
            <div class="roulette" [style.transform]="getRotationStyle()">
                <!-- Segmentos con emojis en zona exterior -->
                <div class="segment" *ngFor="let task of allTasks; let i = index"
                     [attr.data-segment]="i"
                     [attr.data-task-category]="getTaskCategory(i)"
                     [title]="getTaskDescription(i)">
                    <div class="segment-inner">
                        <div class="segment-emoji-zone">
                            <span class="segment-emoji">{{ task }}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pointer" title="Selector de la ruleta"></div>
            <!-- Bot√≥n central optimizado -->
            <button class="center-spin-button"
                    (click)="spinWithSound()"
                    [disabled]="isSpinning"
                    [attr.aria-label]="isSpinning ? 'Girando la ruleta' : 'Girar la ruleta'"
                    type="button">
                <span class="spin-text">{{ isSpinning ? 'GIRANDO...' : '¬°GIRAR!' }}</span>
            </button>
        </div>
    </div>

    <!-- Resultado -->
    <div class="result-container">
        <div class="result" [attr.aria-live]="'polite'">{{ result }}</div>
    </div>

    <!-- Lista de Retos -->
    <div class="controls-section">
        <button class="options-button" 
                (click)="toggleOptions()"
                [attr.aria-expanded]="showOptions"
                type="button">
            <span class="options-icon">{{ showOptions ? 'üëÅÔ∏è' : 'üìã' }}</span>
            {{ showOptions ? 'Ocultar Retos' : 'Ver Todos los Retos' }}
        </button>

        <div class="options-list" [class.show]="showOptions" [attr.aria-hidden]="!showOptions">
            <div class="tasks-section migue-section">
                <h2 class="section-title">üî• Para Migue (14 retos)</h2>
                <ul class="tasks-list">
                    <li *ngFor="let task of getMigueTasksList(); let i = index" 
                        class="task-item migue-task">
                        <span class="task-number">{{ i + 1 }}</span>
                        <span class="task-text">{{ task }}</span>
                    </li>
                </ul>
            </div>

            <div class="tasks-section couple-section">
                <h2 class="section-title">üçì Para Migue + una chica (4 retos)</h2>
                <ul class="tasks-list">
                    <li *ngFor="let task of getCoupleTasksList(); let i = index" 
                        class="task-item couple-task">
                        <span class="task-number">{{ i + 1 }}</span>
                        <span class="task-text">{{ task }}</span>
                    </li>
                </ul>
            </div>

            <div class="tasks-section girls-section">
                <h2 class="section-title">üíã Solo para las chicas (2 retos)</h2>
                <ul class="tasks-list">
                    <li *ngFor="let task of getGirlsTasksList(); let i = index" 
                        class="task-item girls-task">
                        <span class="task-number">{{ i + 1 }}</span>
                        <span class="task-text">{{ task }}</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>